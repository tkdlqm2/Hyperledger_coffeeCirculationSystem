{"remainingRequest":"/Users/hongjoonkim/Desktop/block-chain-coffee/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hongjoonkim/Desktop/block-chain-coffee/src/views/main/common/show-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hongjoonkim/Desktop/block-chain-coffee/src/views/main/common/show-list.vue","mtime":1569384699531},{"path":"/Users/hongjoonkim/Desktop/block-chain-coffee/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hongjoonkim/Desktop/block-chain-coffee/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hongjoonkim/Desktop/block-chain-coffee/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hongjoonkim/Desktop/block-chain-coffee/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios   from 'axios'\nimport modal         from './info-modal'\nimport QRcodeModal   from './qrcode-modal'\nimport CommonService from '../../../api/common/commonService'\nimport $ from 'jquery'\nexport default {\n    components : { \n        'info-modal'    : modal,\n        'qr-code-modal' : QRcodeModal\n    },\n    async mounted() {\n        this.data = await CommonService.getHistory();\n        await this.meregRow()\n    },\n    data() {\n        return {\n            // data  : [\n            //         {\"key\":\"1112\",\"v11\":\"2019/09/01\",\"v12\":\"로부스타\",\"v13\":\"에티오피아\",\"v14\":\"2019/08/01\",\"v15\":\"60\",\"v16\":\"AA\",\"v17\":\"2500~3000\",\"v18\":\"인천 중구 인중로 305 북성동 1가 4-1\",\"v19\":\"2019/09/06\",\"v20\":\"2019/09/07\",\"v21\":\"19°C\",\"v22\":\"66∅\",\"v23\":\"2019/09/08\",\"v24\":\"카페 블리스\",\"v25\":\"2019/09/09 \",\"v26\":\"2019/09/09\",\"v27\":\"라이트\",\"v28\":\"2\",\"v29\":\"3\",\"v30\":\"2\",\"v31\":\"1\",\"v32\":\"2\",\"v33\":\"4\",\"v34\":\"4\",\"v35\":\"4\",\"v36\":\"2019/09/11\",\"v37\":\"블록커피\",\"v38\":\"2019/09/12\",\"v39\":\"2019/09/12\",\"v40\":\"2019/09/12\"},\n            //         {\"key\":\"1113\",\"v11\":\"2019/08/01\",\"v12\":\"리베리카\",\"v13\":\"케냐\",\"v14\":\"2019/08/02\",\"v15\":\"60\",\"v16\":\"AA\",\"v17\":\"2500~3000\",\"v18\":\"인천 중구 인중로 305 북성동 1가 4-1\",\"v19\":\"2019/08/06\",\"v20\":\"2019/08/07\",\"v21\":\"19°C\",\"v22\":\"66∅\",\"v23\":\"2019/08/08\",\"v24\":\"런던다방\",\"v25\":\"2019/08/09 \",\"v26\":\"2019/08/09\",\"v27\":\"시나몬\",\"v28\":\"1\",\"v29\":\"3\",\"v30\":\"2\",\"v31\":\"5\",\"v32\":\"2\",\"v33\":\"4\",\"v34\":\"2\",\"v35\":\"2\",\"v36\":\"2019/08/11\",\"v37\":\"블록커피\",\"v38\":\"2019/08/12\",\"v39\":\"2019/08/12\",\"v40\":\"2019/08/12\"},\n            //         {\"key\":\"121416\",\"v11\":\"2019/07/01\",\"v12\":\"아라비카\",\"v13\":\"브라질\",\"v14\":\"2019/07/01\",\"v15\":\"60\",\"v16\":\"AA\",\"v17\":\"2500~3000\",\"v18\":\"인천 중구 인중로 305 북성동 1가 4-1\",\"v19\":\"2019/07/06\",\"v20\":\"2019/07/07\",\"v21\":\"19°C\",\"v22\":\"66∅\",\"v23\":\"2019/07/08\",\"v24\":\"커피프린스 1호점\",\"v25\":\"2019/07/09 \",\"v26\":\"2019/07/09\",\"v27\":\"라이트\",\"v28\":\"2\",\"v29\":\"3\",\"v30\":\"2\",\"v31\":\"5\",\"v32\":\"2\",\"v33\":\"1\",\"v34\":\"1\",\"v35\":\"4\",\"v36\":\"2019/07/11\",\"v37\":\"블록커피\",\"v38\":\"2019/07/12\",\"v39\":\"2019/07/12\",\"v40\":\"2019/07/12\"}\n            // ],\n            data : [],\n            modalData : {},\n            qrcodeData : [],\n            dataModalBtn: false,\n            qrCodeModalBtn : false,\n        }\n    },\n    methods :{\n        openModal(row) {\n            this.dataModalBtn = true;\n            this.modalData = row;\n        },\n        openQRCode(event, row) {\n\n            // [1] row에 걸린 이벤트 제거\n            event.stopPropagation();\n\n            // [2] QR 코드 보여주기\n            this.qrCodeModalBtn = true;\n        },\n        openQRCodeinJquery(event ,index) {\n\n             // [1] row에 걸린 이벤트 제거\n            event.stopPropagation();\n            \n            const start = parseInt(this.data.length/4)+1\n            const end   = start + 4\n            this.qrcodeData = this.data.slice(start, end)\n\n            // [2] QR 코드 보여주기\n            this.qrCodeModalBtn = true;\n\n        },\n        meregRow() {\n            // 엑셀 row 병합 함수 \n            $('.qr-code').each(function() {\n                var rows = $(\".qr-code[row-idx='\" + $(this).attr('row-idx') + \"']\");\n                if (rows.length > 1) {\n                    rows.eq(0).attr(\"rowspan\", rows.length);\n                    rows.not(\":eq(0)\").remove();\n                }\n            })\n        },\n\n        async refresh() {\n            this.data = await CommonService.getHistory();\n            await this.meregRow()\n        }\n    }\n}\n",{"version":3,"sources":["show-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"show-list.vue","sourceRoot":"src/views/main/common","sourcesContent":["<template>\n    <section class=\"show-list\">\n        <div class=\"level\">\n            <h3 class=\"title\">\n                이력 조회\n                <b-button size=\"is-medium\"\n                    icon-right=\"refresh\" @click=\"refresh\">\n                    새로고침\n                </b-button>\n            </h3>\n            <span class=\"has-text-danger has-text-weight-bold is-size-6\"> * 패키징 되지 않은 원두는 QR코드가 제공되지 않습니다.</span>\n        </div>\n\n        <table class=\"table is-fullwidth\">\n            <thead>\n                <tr>\n                    <th class=\"has-text-centered\" style=\"width: 10%;\">커피 ID</th>  \n                    <th class=\"has-text-centered\" style=\"width: 15%;\">품종목록</th>\n                    <th class=\"has-text-centered\" style=\"width: 15%;\">산지</th>\n                    <th class=\"has-text-centered\" style=\"width: 20%;\">등록일자</th>\n                    <th class=\"has-text-centered\" style=\"width: 20%;\">QR코드</th>\n                </tr>     \n            </thead>\n            <tbody>\n\n                <tr v-for=\"(row, index) in data\" :key=\"row.key\" @click=\"openModal(row)\">\n                    <td>{{row.key}}</td>\n                    <td>{{row.v12}}</td>\n                    <td>{{row.v13}}</td>\n                    <td>{{row.v11}}</td>\n                    <td class=\"qr-code\" :row-idx=\"parseInt(index/4)\">\n                        <b-button icon-left=\"qrcode-scan\" @click.prevent=\"openQRCodeinJquery($event,index)\">보기</b-button>\n                    </td>\n                </tr>\n            </tbody>\n            \n        </table>\n\n        <!-- <b-table\n            :data=\"data\"\n            :striped=\"true\"\n            :hoverable=\"true\"\n            :mobile-cards=\"true\"\n            @click=\"openModal\">\n\n            <template slot-scope=\"props\">\n                <b-table-column field=\"key\" label=\"커피 ID\" width=\"200\">\n                    {{ props.row.key }}\n                </b-table-column>\n\n                <b-table-column field=\"v12\" label=\"품종목록\">\n                    {{ props.row.v12 }}\n                </b-table-column>\n\n                <b-table-column field=\"v13\" label=\"산지\">\n                    {{ props.row.v13 }}\n                </b-table-column>\n\n                <b-table-column field=\"v11\" label=\"등록일자\" centered>\n                    <span class=\"tag is-success\">\n                        {{ props.row.v11 }}\n                    </span>\n                </b-table-column>\n                \n                <b-table-column label=\"QR 코드\" class=\"qr-code\" :data-row-idx-by-4=\"parseInt(props.index/4)\">\n                    <span @click.prevent=\"openQRCode($event, props.row)\">\n                        <b-button icon-left=\"qrcode-scan\">보기</b-button>\n                    </span>\n                </b-table-column>\n            </template>\n\n            <template slot=\"empty\">\n                <section class=\"section\">\n                    <div class=\"content has-text-grey has-text-centered\">\n                        <p>\n                            <b-icon\n                                icon=\"emoticon-sad\"\n                                size=\"is-large\">\n                            </b-icon>\n                        </p>\n                        <p>데이터가 없습니다</p>\n                    </div>\n                </section>\n            </template>\n        </b-table> -->\n\n        <b-modal :active.sync=\"dataModalBtn\" has-modal-card>\n            <info-modal :rowData=modalData></info-modal>\n        </b-modal>\n\n        <b-modal :active.sync=\"qrCodeModalBtn\" has-modal-card>\n            <qr-code-modal :rowData=qrcodeData></qr-code-modal>\n        </b-modal>    \n    </section>\n</template>\n<script>\nimport axios   from 'axios'\nimport modal         from './info-modal'\nimport QRcodeModal   from './qrcode-modal'\nimport CommonService from '../../../api/common/commonService'\nimport $ from 'jquery'\nexport default {\n    components : { \n        'info-modal'    : modal,\n        'qr-code-modal' : QRcodeModal\n    },\n    async mounted() {\n        this.data = await CommonService.getHistory();\n        await this.meregRow()\n    },\n    data() {\n        return {\n            // data  : [\n            //         {\"key\":\"1112\",\"v11\":\"2019/09/01\",\"v12\":\"로부스타\",\"v13\":\"에티오피아\",\"v14\":\"2019/08/01\",\"v15\":\"60\",\"v16\":\"AA\",\"v17\":\"2500~3000\",\"v18\":\"인천 중구 인중로 305 북성동 1가 4-1\",\"v19\":\"2019/09/06\",\"v20\":\"2019/09/07\",\"v21\":\"19°C\",\"v22\":\"66∅\",\"v23\":\"2019/09/08\",\"v24\":\"카페 블리스\",\"v25\":\"2019/09/09 \",\"v26\":\"2019/09/09\",\"v27\":\"라이트\",\"v28\":\"2\",\"v29\":\"3\",\"v30\":\"2\",\"v31\":\"1\",\"v32\":\"2\",\"v33\":\"4\",\"v34\":\"4\",\"v35\":\"4\",\"v36\":\"2019/09/11\",\"v37\":\"블록커피\",\"v38\":\"2019/09/12\",\"v39\":\"2019/09/12\",\"v40\":\"2019/09/12\"},\n            //         {\"key\":\"1113\",\"v11\":\"2019/08/01\",\"v12\":\"리베리카\",\"v13\":\"케냐\",\"v14\":\"2019/08/02\",\"v15\":\"60\",\"v16\":\"AA\",\"v17\":\"2500~3000\",\"v18\":\"인천 중구 인중로 305 북성동 1가 4-1\",\"v19\":\"2019/08/06\",\"v20\":\"2019/08/07\",\"v21\":\"19°C\",\"v22\":\"66∅\",\"v23\":\"2019/08/08\",\"v24\":\"런던다방\",\"v25\":\"2019/08/09 \",\"v26\":\"2019/08/09\",\"v27\":\"시나몬\",\"v28\":\"1\",\"v29\":\"3\",\"v30\":\"2\",\"v31\":\"5\",\"v32\":\"2\",\"v33\":\"4\",\"v34\":\"2\",\"v35\":\"2\",\"v36\":\"2019/08/11\",\"v37\":\"블록커피\",\"v38\":\"2019/08/12\",\"v39\":\"2019/08/12\",\"v40\":\"2019/08/12\"},\n            //         {\"key\":\"121416\",\"v11\":\"2019/07/01\",\"v12\":\"아라비카\",\"v13\":\"브라질\",\"v14\":\"2019/07/01\",\"v15\":\"60\",\"v16\":\"AA\",\"v17\":\"2500~3000\",\"v18\":\"인천 중구 인중로 305 북성동 1가 4-1\",\"v19\":\"2019/07/06\",\"v20\":\"2019/07/07\",\"v21\":\"19°C\",\"v22\":\"66∅\",\"v23\":\"2019/07/08\",\"v24\":\"커피프린스 1호점\",\"v25\":\"2019/07/09 \",\"v26\":\"2019/07/09\",\"v27\":\"라이트\",\"v28\":\"2\",\"v29\":\"3\",\"v30\":\"2\",\"v31\":\"5\",\"v32\":\"2\",\"v33\":\"1\",\"v34\":\"1\",\"v35\":\"4\",\"v36\":\"2019/07/11\",\"v37\":\"블록커피\",\"v38\":\"2019/07/12\",\"v39\":\"2019/07/12\",\"v40\":\"2019/07/12\"}\n            // ],\n            data : [],\n            modalData : {},\n            qrcodeData : [],\n            dataModalBtn: false,\n            qrCodeModalBtn : false,\n        }\n    },\n    methods :{\n        openModal(row) {\n            this.dataModalBtn = true;\n            this.modalData = row;\n        },\n        openQRCode(event, row) {\n\n            // [1] row에 걸린 이벤트 제거\n            event.stopPropagation();\n\n            // [2] QR 코드 보여주기\n            this.qrCodeModalBtn = true;\n        },\n        openQRCodeinJquery(event ,index) {\n\n             // [1] row에 걸린 이벤트 제거\n            event.stopPropagation();\n            \n            const start = parseInt(this.data.length/4)+1\n            const end   = start + 4\n            this.qrcodeData = this.data.slice(start, end)\n\n            // [2] QR 코드 보여주기\n            this.qrCodeModalBtn = true;\n\n        },\n        meregRow() {\n            // 엑셀 row 병합 함수 \n            $('.qr-code').each(function() {\n                var rows = $(\".qr-code[row-idx='\" + $(this).attr('row-idx') + \"']\");\n                if (rows.length > 1) {\n                    rows.eq(0).attr(\"rowspan\", rows.length);\n                    rows.not(\":eq(0)\").remove();\n                }\n            })\n        },\n\n        async refresh() {\n            this.data = await CommonService.getHistory();\n            await this.meregRow()\n        }\n    }\n}\n</script>\n<style scoped>\ntable tr {\n    text-align: center;\n}\ntable tr td {\n    text-align: center;\n}\ntable tr th {\n    text-align: center;\n}\n</style>\n"]}]}